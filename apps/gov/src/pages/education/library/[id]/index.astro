---
import type { ContentSchema } from '@repo/schema'
import CMSLoader from '@/components/CMSLoader.astro'
import { ContentAPI } from '@repo/api'

export const prerender = false

const id = Astro.params.id as string
---

<CMSLoader
  loader={async () => {
    return ContentAPI.detail<{
      book: ContentSchema.Content
      translation?: ContentSchema.Translation
    }>({ slug: 'books', id }).then(data => ({
      content: data.book,
      translationId: data.translation?.englishId
    }))
  }}
/>
