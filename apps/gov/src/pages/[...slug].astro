---
export const prerender = true

import { render } from '@/content'
import LayoutSwitcher from '@/layouts/LayoutSwitcher.astro'
import { getCollection } from 'astro:content'

export async function getStaticPaths() {
  const pages = await getCollection('site')
  return pages.map(page => {
    return {
      params: { slug: page.id === 'index' ? undefined : page.id },
      props: { page }
    }
  })
}

const { page } = Astro.props
const { Content } = await render(page)
const { title, description, type } = page.data
---

<LayoutSwitcher {title} {description} {type}>
  <Content />
</LayoutSwitcher>
