---
import CMSLoader from '@/components/CMSLoader.astro'
import type { ContentSchema } from '@repo/schema'
import { ContentAPI } from '@repo/api'

export const prerender = false

const { id } = Astro.params
---

<CMSLoader
  loader={async () =>
    ContentAPI.detail<{
      book: ContentSchema.Content
      translation?: ContentSchema.Translation
    }>({ slug: 'books', id: id as string }).then(data => ({
      content: data.book,
      translationId: data.translation?.ukrainianId
    }))}
/>
