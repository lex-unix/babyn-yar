---
import CMSLoader from '@/components/CMSLoader.astro'
import { ContentAPI } from '@repo/api'
import type { ContentSchema } from '@repo/schema'

export const prerender = false

const { id } = Astro.params
---

<CMSLoader
  loader={async () =>
    ContentAPI.detail<{
      event: ContentSchema.Content
      translation?: ContentSchema.Translation
    }>({ slug: 'events', id: id as string }).then(data => ({
      content: data.event,
      translationId: data.translation?.englishId
    }))}
/>
