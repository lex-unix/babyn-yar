---
import LayoutSwitcher from '@/layouts/LayoutSwitcher.astro'
import { generateHTML } from 'tip-tap-utils'

export const prerender = false

const id = Astro.params.id

const response = await fetch(`http:localhost:8000/v1/events/${id}`)
if (response.status === 404) {
  return new Response(null, { status: 404 })
}
const json = await response.json()
const { event } = json
const html = generateHTML(JSON.parse(event.content))
---

<LayoutSwitcher title={event.title} description={event.description} type="base">
  <Fragment set:html={html} />
</LayoutSwitcher>

<style is:global>
  div > img,
  div > video {
    @apply !-mx-4 !h-auto !w-[calc(100%+2rem)] !max-w-[calc(100%+2rem)] md:!-mx-[calc(39px+2rem)] md:!w-[calc(100%+((2rem+39px)*2))] md:!max-w-[calc(100%+((2rem+39px)*2))] lg:!-mx-[calc(39px+3rem)] lg:!w-[calc(100%+((3rem+39px)*2))] lg:!max-w-[calc(100%+((3rem+39px)*2))];
  }
</style>
